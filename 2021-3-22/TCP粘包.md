####  TCP 粘包

***

TCP 粘包是指发送方发送的若干包数据到接收方接收时粘成一包，从接收缓冲区看，后一包数据的头紧接着前一包数据的尾。

原因：

1. 发送方原因：发送方在缓存区积累很多的数据，并且一次性发送出去。例如使用`Nagle` 算法。
2. 接收方原因：在接受缓存中的数据应用层没有及时处理。

解决方法：

1. 关闭`Nagle`算法

2. 应用层处理：

3. 1. 格式化数据：每条数据有固定的格式（开始符、结束符），这种方法简单易行，但选择开始符和结束符的时候一定要注意每条数据的内部一定不能出现开始符或结束符；
   2. 发送长度：发送每条数据的时候，将数据的长度一并发送，比如可以选择每条数据的前4位是数据的长度，应用层处理时可以根据长度来判断每条数据的开始和结束。
   3. 发送固定长度的消息